<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>felixfontein.acme.acme_certificate role – Issue TLS/SSL certificates from an ACME CA &mdash; Felixfontein.Acme Collection  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/ansible.css" type="text/css" />
      <link rel="stylesheet" href="_static/antsibull-minimal.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/rtd-ethical-ads.css" type="text/css" />
    <link rel="shortcut icon" href="_static/images/Ansible-Mark-RGB_Black.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="felixfontein.acme.revoke_old_certificates role – Revoke old certificates" href="revoke_old_certificates_role.html" />
    <link rel="prev" title="felixfontein.acme.account_key_rollover role – Do account key rollover" href="account_key_rollover_role.html" /><!-- extra head elements for Ansible beyond RTD Sphinx Theme -->




</head>

<body class="wy-body-for-nav"><!-- extra body elements for Ansible beyond RTD Sphinx Theme -->

<div class="DocSite-globalNav ansibleNav">
  <ul>
    <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
    <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
    <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
    <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
    <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
  </ul>
</div>

<a class="DocSite-nav" href="https://felixfontein.github.io/ansible-acme/branch/main/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="_static/images/Ansible-Mark-RGB_White.png"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">Felixfontein.Acme Collection Docs</div>
</a>
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Felixfontein.Acme Collection
          </a><!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    
  
</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <label class="sr-only" for="q">Search docs:</label>
    <input type="text" class="st-default-search-input" id="q" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <ul>
<li class="toctree-l1"><a class="reference internal" href="docsite/requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="docsite/general_role_parameters.html">General Role Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="docsite/acme_account.html">ACME Accounts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="docsite/account_key_rollover_role.html">felixfontein.acme.account_key_rollover role</a></li>
<li class="toctree-l1"><a class="reference internal" href="docsite/acme_certificate_role.html">felixfontein.acme.acme_certificate role</a></li>
<li class="toctree-l1"><a class="reference internal" href="docsite/revoke_old_certificates_role.html">felixfontein.acme.revoke_old_certificates role</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="_substitute_dns_filter.html">felixfontein.acme._substitute_dns filter – [INTERNAL] Adjust DNS name according to a CNAME substitution map</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="account_key_rollover_role.html">felixfontein.acme.account_key_rollover role – Do account key rollover</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">felixfontein.acme.acme_certificate role – Issue TLS/SSL certificates from an ACME CA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#entry-point-main-issue-tls-ssl-certificates-from-an-acme-ca">Entry point <code class="docutils literal notranslate"><span class="pre">main</span></code> – Issue TLS/SSL certificates from an ACME CA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-also">See Also</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authors">Authors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#collection-links">Collection links</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="revoke_old_certificates_role.html">felixfontein.acme.revoke_old_certificates role – Revoke old certificates</a></li>
</ul>
<!-- extra nav elements for Ansible beyond RTD Sphinx Theme -->

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Felixfontein.Acme Collection</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">felixfontein.acme.acme_certificate role – Issue TLS/SSL certificates from an ACME CA</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

  
           <div itemprop="articleBody">
             
  <span class="target" id="ansible-collections-felixfontein-acme-acme-certificate-role"></span><section id="felixfontein-acme-acme-certificate-role-issue-tls-ssl-certificates-from-an-acme-ca">
<h1>felixfontein.acme.acme_certificate role – Issue TLS/SSL certificates from an ACME CA<a class="headerlink" href="#felixfontein-acme-acme-certificate-role-issue-tls-ssl-certificates-from-an-acme-ca" title="Permalink to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This role is part of the <a class="reference external" href="https://galaxy.ansible.com/felixfontein/acme">felixfontein.acme collection</a> (version 0.6.0).</p>
<p>To install it use: <code class="code docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">install</span> <span class="pre">felixfontein.acme</span></code>.</p>
<p>To use it in a playbook, specify: <code class="code docutils literal notranslate"><span class="pre">felixfontein.acme.acme_certificate</span></code>.</p>
</div>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#entry-point-main-issue-tls-ssl-certificates-from-an-acme-ca" id="id1">Entry point <code class="docutils literal notranslate"><span class="pre">main</span></code> – Issue TLS/SSL certificates from an ACME CA</a></p>
<ul>
<li><p><a class="reference internal" href="#synopsis" id="id2">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id3">Parameters</a></p></li>
<li><p><a class="reference internal" href="#see-also" id="id4">See Also</a></p></li>
<li><p><a class="reference internal" href="#authors" id="id5">Authors</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="entry-point-main-issue-tls-ssl-certificates-from-an-acme-ca">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Entry point <code class="docutils literal notranslate"><span class="pre">main</span></code> – Issue TLS/SSL certificates from an ACME CA</a><a class="headerlink" href="#entry-point-main-issue-tls-ssl-certificates-from-an-acme-ca" title="Permalink to this heading"></a></h2>
<p class="ansible-version-added">New in felixfontein.acme 0.1.0</p>
<section id="synopsis">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">Synopsis</a><a class="headerlink" href="#synopsis" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>This is a role which can use any CA supporting the ACME protocol, such as <a class="reference external" href="https://letsencrypt.org/">Let’s Encrypt</a>, <a class="reference external" href="https://www.buypass.com/ssl/products/acme">Buypass</a> or <a class="reference external" href="https://zerossl.com/features/acme/">ZeroSSL</a>, to issue TLS/SSL certificates for your server.</p></li>
<li><p>The main advantage of this approach over others is that <strong>almost no code is executed on your webserver</strong>: only when you use HTTP challenges, files need to be copied onto your webserver, and afterwards deleted from it. Everything else is executed on your local machine! In particular, the account key is <strong>never</strong> sent to another machine.</p></li>
<li><p>This role does not cover installing the certificates, you have to do that yourself in another role.</p></li>
</ul>
</section>
<section id="parameters">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h3>
<table class="ansible-option-table docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_acme_account"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-acme-account"><strong>acme_certificate_acme_account</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_acme_account" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Path to the private ACME account key. Either this or <em>acme_certificate_acme_account_content</em> must always be specified.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_acme_account_content"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-acme-account-content"><strong>acme_certificate_acme_account_content</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_acme_account_content" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Content of the private ACME account key. Either this or <em>acme_certificate_acme_account</em> must always be specified.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_acme_account_uri"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-acme-account-uri"><strong>acme_certificate_acme_account_uri</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_acme_account_uri" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Instead of determining the account URI from the account key, assumes the given account URI.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_acme_directory"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-acme-directory"><strong>acme_certificate_acme_directory</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_acme_directory" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The ACME directory to use.</p>
<p>Default is <code class="docutils literal notranslate"><span class="pre">https://acme-v02.api.letsencrypt.org/directory</span></code>, which is the current production ACME v2 endpoint of Let’s Encrypt.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">&quot;https://acme-v02.api.letsencrypt.org/directory&quot;</span></code></p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_acme_email"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-acme-email"><strong>acme_certificate_acme_email</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_acme_email" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Your email address which shall be associated to the ACME account.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_acme_version"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-acme-version"><strong>acme_certificate_acme_version</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_acme_version" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The ACME directory’s version.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">2</span></code></p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_algorithm"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-algorithm"><strong>acme_certificate_algorithm</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_algorithm" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The algorithm used for creating private keys.</p>
<p>The default is <code class="docutils literal notranslate"><span class="pre">rsa</span></code> for RSA keys.</p>
<p>Other choices are <code class="docutils literal notranslate"><span class="pre">p-256</span></code>, <code class="docutils literal notranslate"><span class="pre">p-384</span></code> or <code class="docutils literal notranslate"><span class="pre">p-521</span></code> for the NIST elliptic curves <code class="docutils literal notranslate"><span class="pre">prime256v1</span></code>, <code class="docutils literal notranslate"><span class="pre">secp384r1</span></code> and <code class="docutils literal notranslate"><span class="pre">secp521r1</span></code>, respectively.</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">&quot;rsa&quot;</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;p-256&quot;</span></code></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;p-384&quot;</span></code></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;p-521&quot;</span></code></p></li>
</ul>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_aws_access_key"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-aws-access-key"><strong>acme_certificate_aws_access_key</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_aws_access_key" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>When using <em>acme_certificate_dns_provider=route53</em>, the AWS access key for Route53 must be passed in this option.</p>
<p>When <em>acme_certificate_verify_auth=false</em>, this is not required when <em>acme_certificate_dns_provider=route53</em> and can be provided in other ways, for example with <a class="reference external" href="https://docs.ansible.com/ansible/devel/playbook_guide/playbooks_module_defaults.html#module-defaults" title="(in Ansible vdevel)"><span class="xref std std-ref">module defaults</span></a>.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_aws_secret_key"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-aws-secret-key"><strong>acme_certificate_aws_secret_key</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_aws_secret_key" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>When using <em>acme_certificate_dns_provider=route53</em>, the AWS secret key for Route53 must be passed in this option.</p>
<p>When <em>acme_certificate_verify_auth=false</em>, this is not required when <em>acme_certificate_dns_provider=route53</em> and can be provided in other ways, for example with <a class="reference external" href="https://docs.ansible.com/ansible/devel/playbook_guide/playbooks_module_defaults.html#module-defaults" title="(in Ansible vdevel)"><span class="xref std std-ref">module defaults</span></a>.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_challenge"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-challenge"><strong>acme_certificate_challenge</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_challenge" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The challenge type to use.</p>
<p>Should be <code class="docutils literal notranslate"><span class="pre">http-01</span></code> for HTTP challenges (needs access to web server) or <code class="docutils literal notranslate"><span class="pre">dns-01</span></code> for DNS challenges (needs access to DNS provider).</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;http-01&quot;</span></code></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;dns-01&quot;</span></code></p></li>
</ul>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_deactivate_authzs"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-deactivate-authzs"><strong>acme_certificate_deactivate_authzs</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_deactivate_authzs" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Whether <code class="docutils literal notranslate"><span class="pre">authz</span></code> objects (authorizations) should be deactivated afterwards.</p>
<p>Set to <code class="docutils literal notranslate"><span class="pre">false</span></code> to be able to re-use <code class="docutils literal notranslate"><span class="pre">authz</span></code> objects. This should mostly be used when issuing multiple certificates for the same domain names.</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">false</span></code></p></li>
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">true</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
</ul>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_dns_provider"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-dns-provider"><strong>acme_certificate_dns_provider</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_dns_provider" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Determines which DNS provider is used for DNS challenges.</p>
<p>Every DNS provider requires further configuration.</p>
<p>The value <code class="docutils literal notranslate"><span class="pre">ansibletest</span></code> must not be used outside of integration tests. It will <strong>not</strong> work.</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;route53&quot;</span></code></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;hosttech&quot;</span></code></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;ns1&quot;</span></code></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;inwx&quot;</span></code></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;ansibletest&quot;</span></code></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;openstack&quot;</span></code></p></li>
</ul>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_dns_substitution"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-dns-substitution"><strong>acme_certificate_dns_substitution</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_dns_substitution" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p>
<p><span class="ansible-option-versionadded">added in felixfontein.acme 0.6.0</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Allows to substitute parts of the DNS entry domain names. This can be very useful if certificates are obtained for domain names that are CNAMEs, and the DNS provider for where the CNAME points need to be modified.</p>
<p>The entries in this dictionary should be the names that are to be replaced, and the values the replacements. A single leading wildcard can be used to replace suffixes instead of the complete string, assuming the prefix has no further period (<code class="docutils literal notranslate"><span class="pre">.</span></code>).</p>
<p>For example, if the key is <code class="docutils literal notranslate"><span class="pre">*.example.com</span></code> and the value <code class="docutils literal notranslate"><span class="pre">*.foo.example.org</span></code>, the name <code class="docutils literal notranslate"><span class="pre">_acme-challenge.example.com</span></code> will be replaced by <code class="docutils literal notranslate"><span class="pre">*.foo.example.org</span></code>. If the key is <code class="docutils literal notranslate"><span class="pre">*.example.com</span></code> and the value <code class="docutils literal notranslate"><span class="pre">foo.example.org</span></code>, the name <code class="docutils literal notranslate"><span class="pre">_acme-challenge.example.com</span></code> will be replaced by <code class="docutils literal notranslate"><span class="pre">foo.example.org</span></code>. And if the key is <code class="docutils literal notranslate"><span class="pre">example.com</span></code> and the value <code class="docutils literal notranslate"><span class="pre">foo.example.org</span></code>, <code class="docutils literal notranslate"><span class="pre">_acme-challenge.example.com</span></code> will not be changed at all, only <code class="docutils literal notranslate"><span class="pre">example.com</span></code> will be changed to <code class="docutils literal notranslate"><span class="pre">foo.example.org</span></code>.</p>
<p>Note that if you want to obtain certificates with ACME with <em>acme_certificate_challenge=dns-01</em> for <code class="docutils literal notranslate"><span class="pre">example.com</span></code> whose CNAME is <code class="docutils literal notranslate"><span class="pre">foo.example.org</span></code>, you should create (and provide in this variable) another CNAME record <code class="docutils literal notranslate"><span class="pre">*.example.com</span></code>, or <code class="docutils literal notranslate"><span class="pre">_acme-challenge.example.com</span></code> if it should be more specialized.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">{}</span></code></p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_domains"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-domains"><strong>acme_certificate_domains</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_domains" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The domain names you want to get a certificate for.</p>
<p>Wildcards are only allowed as the first component, i.e. <code class="docutils literal notranslate"><span class="pre">*.example.com</span></code> is ok, while <code class="docutils literal notranslate"><span class="pre">*.*.example.com</span></code> and <code class="docutils literal notranslate"><span class="pre">www.*.example.com</span></code> are not ok.</p>
<p>Also, when wildcards are used, not every challenge type is allowed. Let’s Encrypt only allows wildcard domains with the <code class="docutils literal notranslate"><span class="pre">dns-01</span></code> challenge. At least one of <em>acme_certificate_domains</em> and <em>acme_certificate_ips</em> must be specified.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_hosttech_password"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-hosttech-password"><strong>acme_certificate_hosttech_password</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_hosttech_password" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>When using <em>acme_certificate_dns_provider=hosttech</em> with the old HostTech WSDL API, the API password must be passed in this option.</p>
<p>We recommend to use <em>acme_certificate_hosttech_token</em> instead of <em>acme_certificate_hosttech_username</em> and <em>acme_certificate_hosttech_password</em>.</p>
<p>When <em>acme_certificate_verify_auth=false</em>, this is not required when <em>acme_certificate_dns_provider=hosttech</em> and can be provided in other ways, for example with <a class="reference external" href="https://docs.ansible.com/ansible/devel/playbook_guide/playbooks_module_defaults.html#module-defaults" title="(in Ansible vdevel)"><span class="xref std std-ref">module defaults</span></a>.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_hosttech_token"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-hosttech-token"><strong>acme_certificate_hosttech_token</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_hosttech_token" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>When using <em>acme_certificate_dns_provider=hosttech</em> with the new HostTech JSON REST API, the API token must be passed in this option.</p>
<p>When <em>acme_certificate_verify_auth=false</em>, this is not required when <em>acme_certificate_dns_provider=hosttech</em> and can be provided in other ways, for example with <a class="reference external" href="https://docs.ansible.com/ansible/devel/playbook_guide/playbooks_module_defaults.html#module-defaults" title="(in Ansible vdevel)"><span class="xref std std-ref">module defaults</span></a>.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_hosttech_username"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-hosttech-username"><strong>acme_certificate_hosttech_username</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_hosttech_username" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>When using <em>acme_certificate_dns_provider=hosttech</em> with the old HostTech WSDL API, the API username must be passed in this option.</p>
<p>We recommend to use <em>acme_certificate_hosttech_token</em> instead of <em>acme_certificate_hosttech_username</em> and <em>acme_certificate_hosttech_password</em>.</p>
<p>When <em>acme_certificate_verify_auth=false</em>, this is not required when <em>acme_certificate_dns_provider=hosttech</em> and can be provided in other ways, for example with <a class="reference external" href="https://docs.ansible.com/ansible/devel/playbook_guide/playbooks_module_defaults.html#module-defaults" title="(in Ansible vdevel)"><span class="xref std std-ref">module defaults</span></a>.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_http_become"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-http-become"><strong>acme_certificate_http_become</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_http_become" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Argument for <code class="docutils literal notranslate"><span class="pre">become:</span></code> for the <a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/ansible/builtin/file_module.html#ansible-collections-ansible-builtin-file-module" title="(in Ansible vdevel)"><span class="xref std std-ref">ansible.builtin.file</span></a> and <a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/ansible/builtin/copy_module.html#ansible-collections-ansible-builtin-copy-module" title="(in Ansible vdevel)"><span class="xref std std-ref">ansible.builtin.copy</span></a> tasks.</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">false</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_http_challenge_file_mode"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-http-challenge-file-mode"><strong>acme_certificate_http_challenge_file_mode</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_http_challenge_file_mode" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The mode to use for the challenge files.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">&quot;0640&quot;</span></code></p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_http_challenge_folder_mode"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-http-challenge-folder-mode"><strong>acme_certificate_http_challenge_folder_mode</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_http_challenge_folder_mode" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The mode to use for the challenge folder.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">&quot;0750&quot;</span></code></p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_http_challenge_group"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-http-challenge-group"><strong>acme_certificate_http_challenge_group</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_http_challenge_group" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The group the challenge files are owned by.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">&quot;http&quot;</span></code></p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_http_challenge_user"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-http-challenge-user"><strong>acme_certificate_http_challenge_user</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_http_challenge_user" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The user the challenge files are owned by.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">&quot;root&quot;</span></code></p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_inwx_password"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-inwx-password"><strong>acme_certificate_inwx_password</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_inwx_password" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>When using <em>acme_certificate_dns_provider=inwx</em>, the INWX account password must be passed in this option.</p>
<p>Please note that INWX support depends on the collection <code class="docutils literal notranslate"><span class="pre">inwx.collection</span></code>. Please check out the documentation on how to install it.</p>
<p>Please note that the collection <code class="docutils literal notranslate"><span class="pre">inwx.collection</span></code> does currently not support 2FA (two factor authentication). In order to use this module you need to disable it.</p>
<p>When <em>acme_certificate_verify_auth=false</em>, this is not required when <em>acme_certificate_dns_provider=inwx</em> and can be provided in other ways, for example with <a class="reference external" href="https://docs.ansible.com/ansible/devel/playbook_guide/playbooks_module_defaults.html#module-defaults" title="(in Ansible vdevel)"><span class="xref std std-ref">module defaults</span></a>.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_inwx_username"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-inwx-username"><strong>acme_certificate_inwx_username</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_inwx_username" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>When using <em>acme_certificate_dns_provider=inwx</em>, the INWX account username must be passed in this option.</p>
<p>Please note that INWX support depends on the collection <code class="docutils literal notranslate"><span class="pre">inwx.collection</span></code>. Please check out the documentation on how to install it.</p>
<p>When <em>acme_certificate_verify_auth=false</em>, this is not required when <em>acme_certificate_dns_provider=inwx</em> and can be provided in other ways, for example with <a class="reference external" href="https://docs.ansible.com/ansible/devel/playbook_guide/playbooks_module_defaults.html#module-defaults" title="(in Ansible vdevel)"><span class="xref std std-ref">module defaults</span></a>.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_ips"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-ips"><strong>acme_certificate_ips</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_ips" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The IP addresses you want to get a certificate for.</p>
<p><strong>Note</strong> that this is not supported by every CA!</p>
<p>At least one of <em>acme_certificate_domains</em> and <em>acme_certificate_ips</em> must be specified.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_key_length"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-key-length"><strong>acme_certificate_key_length</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_key_length" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The bit-size to use for RSA private keys.</p>
<p>Should not be less than 2048. Also values above 4096 might not be supported by all TLS/SSL clients.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">4096</span></code></p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_key_name"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-key-name"><strong>acme_certificate_key_name</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_key_name" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The basename for storing the keys and certificates.</p>
<p>The default is the first domain specified, with <code class="docutils literal notranslate"><span class="pre">*</span></code> replaced by <code class="docutils literal notranslate"><span class="pre">_</span></code>.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_keys_old_path"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-keys-old-path"><strong>acme_certificate_keys_old_path</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_keys_old_path" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Where old keys and certificates should be copied to.</p>
<p>Used in case <em>acme_certificate_keys_old_store=true</em>.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">&quot;keys/old/&quot;</span></code></p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_keys_old_prepend_timestamp"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-keys-old-prepend-timestamp"><strong>acme_certificate_keys_old_prepend_timestamp</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_keys_old_prepend_timestamp" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Whether copies of old keys and certificates should be prepended by the current date and time.</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">false</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_keys_old_store"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-keys-old-store"><strong>acme_certificate_keys_old_store</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_keys_old_store" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, will make copies of old keys and certificates.</p>
<p>The copies will be stored in the directory specified by <em>acme_certificate_keys_old_store</em>.</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">false</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_keys_path"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-keys-path"><strong>acme_certificate_keys_path</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_keys_path" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Where the keys and certificates are stored.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">&quot;keys/&quot;</span></code></p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_modify_account"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-modify-account"><strong>acme_certificate_modify_account</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_modify_account" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Whether the ACME account should be created (if it doesn’t exist) and the contact data (email address) should be updated.</p>
<p>Set to <code class="docutils literal notranslate"><span class="pre">false</span></code> if you want to use the <a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/community/crypto/acme_account_module.html#ansible-collections-community-crypto-acme-account-module" title="(in Ansible vdevel)"><span class="xref std std-ref">community.crypto.acme_account</span></a> module to manage your ACME account (not done by this role).</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">false</span></code></p></li>
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">true</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
</ul>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_ns1_secret_key"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-ns1-secret-key"><strong>acme_certificate_ns1_secret_key</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_ns1_secret_key" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>When using <em>acme_certificate_dns_provider=ns1</em>, the NS1 account key must be passed in this option.</p>
<p>Please note that NS1 support depends on the external module <code class="docutils literal notranslate"><span class="pre">ns1_record</span></code>. Please check out the documentation on how to install it.</p>
<p>When <em>acme_certificate_verify_auth=false</em>, this is not required when <em>acme_certificate_dns_provider=ns1</em> and can be provided in other ways, for example with <a class="reference external" href="https://docs.ansible.com/ansible/devel/playbook_guide/playbooks_module_defaults.html#module-defaults" title="(in Ansible vdevel)"><span class="xref std std-ref">module defaults</span></a>.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_ocsp_must_staple"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-ocsp-must-staple"><strong>acme_certificate_ocsp_must_staple</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_ocsp_must_staple" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Whether a certificate with the OCSP Must Staple extension is requested.</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">false</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_privatekey_mode"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-privatekey-mode"><strong>acme_certificate_privatekey_mode</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_privatekey_mode" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Which file mode to use for the private key file.</p>
<p>Default value is <code class="docutils literal notranslate"><span class="pre">0600</span></code> (octal string), which means read- and writeable by the owner, but not accessible by anyone else (except possibly <code class="docutils literal notranslate"><span class="pre">root</span></code>).</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">&quot;0600&quot;</span></code></p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_regenerate_private_keys"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-regenerate-private-keys"><strong>acme_certificate_regenerate_private_keys</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_regenerate_private_keys" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Whether to regenerate private keys.</p>
<p>It is recommended to regularly create new private keys instead of re-using the existing ones forever. The easiest way to ensure this is to simply regenerate them when the certificates are regenerated.</p>
<p>If you use public key pinning, make sure to set this to <code class="docutils literal notranslate"><span class="pre">false</span></code>!</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">false</span></code></p></li>
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">true</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
</ul>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_renewal_on_remaining_days"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-renewal-on-remaining-days"><strong>acme_certificate_renewal_on_remaining_days</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_renewal_on_remaining_days" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p>
<p><span class="ansible-option-versionadded">added in felixfontein.acme 0.5.0</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Only obtain a new certificate if the certificate does not yet exist, or if the certificate’s expiry date is less than <em>acme_certificate_remaining_days</em> days in the future.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_root_certificate"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-root-certificate"><strong>acme_certificate_root_certificate</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_root_certificate" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The root certificate for the ACME directory.</p>
<p>Default value is <code class="docutils literal notranslate"><span class="pre">https://letsencrypt.org/certs/isrgrootx1.pem</span></code> for the root certificate of Let’s Encrypt.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">&quot;https://letsencrypt.org/certs/isrgrootx1.pem&quot;</span></code></p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_root_certificate_for_verification"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-root-certificate-for-verification"><strong>acme_certificate_root_certificate_for_verification</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_root_certificate_for_verification" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>The root certificate to use for validating the ceritificate chain if <em>acme_certificate_verify_certs=true</em>.</p>
<p>If <em>acme_certificate_root_certificate</em> is set to <code class="docutils literal notranslate"><span class="pre">https://letsencrypt.org/certs/trustid-x3-root.pem.txt</span></code>, this should be set to <code class="docutils literal notranslate"><span class="pre">https://letsencrypt.org/certs/isrgrootx1.pem</span></code> to avoid validation failure as the TrustID root has by now expired.</p>
<p>By default uses the same value as <em>acme_certificate_root_certificate</em>.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_select_chain"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-select-chain"><strong>acme_certificate_select_chain</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_select_chain" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Must be in the format described for the <em>select_chain</em> parameter of <a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/community/crypto/acme_certificate_module.html#ansible-collections-community-crypto-acme-certificate-module" title="(in Ansible vdevel)"><span class="xref std std-ref">community.crypto.acme_certificate</span></a> module.</p>
<p>Allows to select the certificate chain to be used; <em>acme_certificate_root_certificate</em> must be used in conjunction.</p>
<p>This can be used for example with <a class="reference external" href="https://community.letsencrypt.org/t/transition-to-isrgs-root-delayed-until-sep-29/125516">Let’s Encrypt</a> to select which root certificate to use. See the documentation for concrete examples how to choose between the Let’s Encrypt roots.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_select_chain/authority_key_identifier"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-select-chain-authority-key-identifier"><strong>authority_key_identifier</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_select_chain/authority_key_identifier" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>Checks for the AuthorityKeyIdentifier extension. This is an identifier based on the private key of the issuer of the intermediate certificate.</p>
<p>The identifier must be of the form <code class="docutils literal notranslate"><span class="pre">C4:A7:B1:A4:7B:2C:71:FA:DB:E1:4B:90:75:FF:C4:15:60:85:89:10</span></code>.</p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_select_chain/issuer"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-select-chain-issuer"><strong>issuer</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_select_chain/issuer" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>Allows to specify parts of the issuer of a certificate in the chain must have to be selected.</p>
<p>If <em>issuer</em> is empty, any certificate will match.</p>
<p>An example value would be <code class="docutils literal notranslate"><span class="pre">{&quot;commonName&quot;:</span> <span class="pre">&quot;My</span> <span class="pre">Preferred</span> <span class="pre">CA</span> <span class="pre">Root&quot;}</span></code>.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_select_chain/subject"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-select-chain-subject"><strong>subject</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_select_chain/subject" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>Allows to specify parts of the subject of a certificate in the chain must have to be selected.</p>
<p>If <em>subject</em> is empty, any certificate will match.</p>
<p>An example value would be <code class="docutils literal notranslate"><span class="pre">{&quot;CN&quot;:</span> <span class="pre">&quot;My</span> <span class="pre">Preferred</span> <span class="pre">CA</span> <span class="pre">Intermediate&quot;}</span></code></p>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_select_chain/subject_key_identifier"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-select-chain-subject-key-identifier"><strong>subject_key_identifier</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_select_chain/subject_key_identifier" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>Checks for the SubjectKeyIdentifier extension. This is an identifier based on the private key of the intermediate certificate.</p>
<p>The identifier must be of the form <code class="docutils literal notranslate"><span class="pre">A8:4A:6A:63:04:7D:DD:BA:E6:D1:39:B7:A6:45:65:EF:F3:A8:EC:A1</span></code>.</p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-indent"></div><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_select_chain/test_certificates"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-select-chain-test-certificates"><strong>test_certificates</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_select_chain/test_certificates" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-indent-desc"></div><div class="ansible-option-cell"><p>Determines which certificates in the chain will be tested.</p>
<p><em>all</em> tests all certificates in the chain (excluding the leaf, which is identical in all chains).</p>
<p><em>first</em> only tests the first certificate in the chain, i.e. the one which signed the leaf.</p>
<p><em>last</em> only tests the last certificate in the chain, i.e. the one furthest away from the leaf. Its issuer is the root certificate of this chain.</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;first&quot;</span></code></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">&quot;last&quot;</span></code></p></li>
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
</ul>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_server_location"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-server-location"><strong>acme_certificate_server_location</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_server_location" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Location where <code class="docutils literal notranslate"><span class="pre">.well-known/acme-challenge/</span></code> will be served from.</p>
<p class="ansible-option-line"><span class="ansible-option-default-bold">Default:</span> <code class="ansible-option-default docutils literal notranslate"><span class="pre">&quot;/var/www/challenges&quot;</span></code></p>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_terms_agreed"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-terms-agreed"><strong>acme_certificate_terms_agreed</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_terms_agreed" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Whether the terms of services are accepted or not.</p>
<p>Usually needs to be set explicitly to <code class="docutils literal notranslate"><span class="pre">true</span></code> to allow creating an ACME account.</p>
<p>This is only used for ACME v2.</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">false</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
</div></td>
</tr>
<tr class="row-odd"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_use_sops_for_key"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-use-sops-for-key"><strong>acme_certificate_use_sops_for_key</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_use_sops_for_key" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Use <a class="reference external" href="https://github.com/mozilla/sops">Mozilla sops</a> to encrypt private key.</p>
<p>Needs <code class="docutils literal notranslate"><span class="pre">.sops.yaml</span></code> file inside the keys directory or somewhere up the directory chain.</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">false</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">true</span></code></p></li>
</ul>
</div></td>
</tr>
<tr class="row-even"><td><div class="ansible-option-cell">
<div class="ansibleOptionAnchor" id="parameter-main--acme_certificate_verify_auth"></div><p class="ansible-option-title" id="ansible-collections-felixfontein-acme-acme-certificate-role-parameter-main-acme-certificate-verify-auth"><strong>acme_certificate_verify_auth</strong></p>
<a class="ansibleOptionLink" href="#parameter-main--acme_certificate_verify_auth" title="Permalink to this option"></a><p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p>
<p><span class="ansible-option-versionadded">added in felixfontein.acme 0.6.0</span></p>
</div></td>
<td><div class="ansible-option-cell"><p>Whether to check whether authentication credentials are provided as role arguments for the DNS modules.</p>
<p>When disabled, you can also use module default groups or environment variables to provide these credentials.</p>
<p class="ansible-option-line"><span class="ansible-option-choices">Choices:</span></p>
<ul class="simple">
<li><p><code class="ansible-option-choices-entry docutils literal notranslate"><span class="pre">false</span></code></p></li>
<li><p><code class="ansible-option-default-bold docutils literal notranslate"><span class="pre">true</span></code> <span class="ansible-option-choices-default-mark">← (default)</span></p></li>
</ul>
</div></td>
</tr>
</tbody>
</table>
</section>
<section id="see-also">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading"></a></h3>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/community/crypto/openssl_privatekey_module.html#ansible-collections-community-crypto-openssl-privatekey-module" title="(in Ansible vdevel)"><span class="xref std std-ref">community.crypto.openssl_privatekey</span></a></dt><dd><p>You can create ACME account keys with this module.</p>
</dd>
<dt><a class="reference external" href="https://docs.ansible.com/ansible/devel/collections/community/crypto/acme_account_module.html#ansible-collections-community-crypto-acme-account-module" title="(in Ansible vdevel)"><span class="xref std std-ref">community.crypto.acme_account</span></a></dt><dd><p>You can manage ACME accounts with this module.</p>
</dd>
</dl>
</div>
</section>
<section id="authors">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Authors</a><a class="headerlink" href="#authors" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Felix Fontein (&#64;felixfontein)</p></li>
</ul>
<section id="collection-links">
<h4>Collection links<a class="headerlink" href="#collection-links" title="Permalink to this heading"></a></h4>
<p class="ansible-links">
  <a href="https://github.com/felixfontein/ansible-acme/issues" aria-role="button" target="_blank" rel="noopener external">Issue Tracker</a>
  <a href="https://github.com/felixfontein/ansible-acme" aria-role="button" target="_blank" rel="noopener external">Repository (Sources)</a>
</p></section>
</section>
</section>
</section>


           </div>
          </div>
          

<footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="account_key_rollover_role.html" class="btn btn-neutral float-left" title="felixfontein.acme.account_key_rollover role – Do account key rollover" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="revoke_old_certificates_role.html" class="btn btn-neutral float-right" title="felixfontein.acme.revoke_old_certificates role – Revoke old certificates" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Felixfontein.Acme Contributors.</p>
  </div>

  
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script><!-- extra footer elements for Ansible beyond RTD Sphinx Theme -->

</body>
</html>